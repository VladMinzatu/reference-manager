<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reference Manager</title>
    <script src="https://unpkg.com/htmx.org@1.9.4"></script>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Remove old CSS, now using Tailwind */
        .category-link.active { font-weight: bold; }
    </style>
    <script>
        document.addEventListener('htmx:afterOnLoad', function(evt) {
            document.querySelectorAll('.category-link').forEach(function(link) {
                link.classList.remove('active');
            });
            if (evt.detail.elt.classList.contains('category-link')) {
                evt.detail.elt.classList.add('active');
            }
        });
    </script>
</head>

<body>
    {{template "body-fragment" .}}
</body>
</html>

{{define "body-fragment"}}
<div id="body-fragment" class="bg-gray-50 min-h-screen flex">
    {{template "sidebar" .sidebar}}
    <div id="main" class="flex-1 p-8">
        {{template "references" .references}}
    </div>
</div>
{{end}}